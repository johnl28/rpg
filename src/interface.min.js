function StartGame(){$("#main-menu").hide(),gameInstance.StartGame(),$("#loading-window").show()}function Resume(){$("#main-menu").hide()}function Save(){let e=gameInstance.player,i={x:e.GetXY().x,y:e.GetXY().y,level:e.level,name:e.name,play_time:e.playTime,empire:e.empire};localStorage.setItem("player_data",JSON.stringify(i)),localStorage.setItem("player_attr",JSON.stringify(e.attributes))}class Interface{ui=null;mainMenu=null;hud=null;loading=null;mobHud=null;constructor(){this.ui=$("#ui"),this.AppendElement("#died-text",'<div id="died-text">YOU DIED! PRESS (R) FOR REVIVING.</div>'),$("#died-text").hide(),this.__initMainMenu(),this.__initHud(),this.__initMobHud(),this.__initLoadingUi(),log("Init UI DONE!")}GameLoaded(){$("#start-btn").hide(),this.mainMenu.prepend('<div class="menu-btn" onclick="Resume()">Close</div>'),this.mainMenu.prepend('<div class="menu-btn" onclick="Save()">Save</div>'),this.loading.hide(),this.hud.show()}AppendElement(e,i){return this.ui.append(i),$(e)}SetLoadingText(e){$("#loading-text").text(e)}UpdateMobHud(e){if(e.IsState("DIE"))return;let i=e.GetAttr("hp"),t=e.GetAttr("maxHp");this.mobHud.css("display","flex");let d=parseFloat(i)/parseFloat(t)*100;$("#monster-name").text(`Lv.${e.level} ${e.name}`),$("#monster-hp").css("width",d+"%"),$("#monster-hp").text(`${i}/${t}`)}ToggleDiedText(){let e=$("#died-text");e.is(":visible")?e.hide():e.show()}__initMobHud(){this.mobHud=this.AppendElement("#mob-hud",'<div id="mob-hud" class="box"></div>'),this.mobHud.append('<div id="monster-name">Name Monster</div>'),this.mobHud.append('<div class="hp-bar" id="monster-hp"></div>')}__initMainMenu(){this.mainMenu=this.AppendElement("#main-menu",'<div id="main-menu"></div>'),this.mainMenu.append('<div id="start-btn" class="menu-btn" onclick="StartGame()">Start</div>'),this.mainMenu.append('<div class="menu-btn" onclick="OpenSettings()">Settings</div>'),this.mainMenu.append('<div class="menu-btn" onclick="OpenCredits()">Credits</div>')}__initLoadingUi(){this.loading=this.AppendElement("#loading-window",'<div id="loading-window"></div>'),this.loading.append('<div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>'),this.loading.append('<div id="loading-text"></div>'),this.loading.hide()}__createTaskBar(){}__initHud(){let e=this.hud=this.AppendElement("#hud",'<div id="hud" class="box"></div>');e.append('<div class="row">Name: <label id="player-name"></label></div>'),e.append('<div class="row">Level: <label id="player-level" /></div>'),e.append('<div class="row"><div id="player-hp" class="hp-bar" /></div>'),e.append('<div class="row">Coordinates: <label id="player-coor" /></div>'),e.hide()}UpdateUI(e){if(!e)return;$("#player-name").text(e.name),$("#player-level").text(e.level);let i=e.GetAttr("hp"),t=e.GetAttr("maxHp"),d=parseFloat(i)/parseFloat(t)*100;$("#player-hp").css("width",`${d}%`),$("#player-hp").text(`${i}/${t}`)}}
