function StartGame(){$("#main-menu").hide(),gameInstance.StartGame(),$("#loading-window").show()}function Resume(){$("#main-menu").hide()}function Save(){let i=gameInstance.player,e={x:i.GetXY().x,y:i.GetXY().y,level:i.level,name:i.name,play_time:i.playTime,empire:i.empire};localStorage.setItem("player_data",JSON.stringify(e)),localStorage.setItem("player_attr",JSON.stringify(i.attributes))}class Interface{ui=null;mainMenu=null;hud=null;loading=null;mobHud=null;constructor(){this.ui=$("#ui"),this.AppendElement("#died-text",'<div id="died-text">YOU DIED! PRESS (R) FOR REVIVING.</div>'),$("#died-text").hide(),this.__initMainMenu(),this.__initHud(),this.__initMobHud(),this.__initLoadingUi(),log("Init UI DONE!")}GameLoaded(){$("#start-btn").hide(),this.mainMenu.prepend('<div class="menu-btn" onclick="Resume()">Close</div>'),this.mainMenu.prepend('<div class="menu-btn" onclick="Save()">Save</div>'),this.loading.hide(),this.hud.show()}AppendElement(i,e){return this.ui.append(e),$(i)}SetLoadingText(i){$("#loading-text").text(i)}UpdateMobHud(i){if(i.IsState("DIE"))return;let e=i.GetAttr("hp"),t=i.GetAttr("maxHp");this.mobHud.css("display","flex");let d=parseFloat(e)/parseFloat(t)*100;$("#monster-name").text(`Lv.${i.level} ${i.name}`),$("#monster-hp").css("width",d+"%"),$("#monster-hp").text(`${e}/${t}`)}ToggleDiedText(){let i=$("#died-text");i.is(":visible")?i.hide():i.show()}__initMobHud(){this.mobHud=this.AppendElement("#mob-hud",'<div id="mob-hud" class="box"></div>'),this.mobHud.append('<div id="monster-name">Name Monster</div>'),this.mobHud.append('<div class="hp-bar" id="monster-hp"></div>')}__initMainMenu(){this.mainMenu=this.AppendElement("#main-menu",'<div id="main-menu"></div>'),this.mainMenu.append('<div id="start-btn" class="menu-btn" onclick="StartGame()">Start</div>'),this.mainMenu.append('<div class="menu-btn" onclick="OpenSettings()">Settings</div>'),this.mainMenu.append('<div class="menu-btn" onclick="OpenCredits()">Credits</div>')}__initLoadingUi(){this.loading=this.AppendElement("#loading-window",'<div id="loading-window"></div>'),this.loading.append('<div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>'),this.loading.append('<div id="loading-text"></div>'),this.loading.hide()}__initMiniMap(){this.loading=this.AppendElement("#mini-map",'<div id="mini-map"></div>')}__createTaskBar(){}__initHud(){let i=this.hud=this.AppendElement("#hud",'<div id="hud" class="box"></div>');i.append('<div class="row">Name: <label id="player-name"></label></div>'),i.append('<div class="row">Level: <label id="player-level" /></div>'),i.append('<div class="row"><div id="player-hp" class="hp-bar" /></div>'),i.append('<div class="row">Coordinates: <label id="player-coor" /></div>'),i.hide()}UpdateUI(i){if(!i)return;$("#player-name").text(i.name),$("#player-level").text(i.level);let e=i.GetAttr("hp"),t=i.GetAttr("maxHp"),d=parseFloat(e)/parseFloat(t)*100;$("#player-hp").css("width",`${d}%`),$("#player-hp").text(`${e}/${t}`)}}
